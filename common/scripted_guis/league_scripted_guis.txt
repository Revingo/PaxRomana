create_league_gui = {
	scope = character

	#trigger_event = {
	#	on_action = on_create_league
	#}
	effect = {
		add_to_variable_list = {
			name = league_list
			target = root
		}
		set_variable = {
			name = in_a_league
			value = yes
		}
		set_variable = {
			name = is_league_leader
			value = yes
		}
		add_character_modifier = {
			modifier = league_funds
		}
		set_variable = {
			name = funds_value
			value = 300
		}
	}

	is_shown = {
		NOT = {
			OR = {
				AND = {
					has_variable = in_a_league
					var:in_a_league = yes
				}
				AND = {
					has_variable = is_league_leader
					var:is_league_leader = yes
				}
			}
		}
	}
}

is_league_leader_gui = {
	scope = character

	is_shown = {
		AND = {
			has_variable = is_league_leader
			var:is_league_leader = yes 

		}
	}
}

take_league_loan_owner_gui = {
	scope = character

	effect = {
		change_variable = {
			name = funds_value
			subtract = 300
		}
		add_gold = 300
		every_in_list = {
			variable = league_list

			if = {
				limit = { NOT = {this = root} }

				add_opinion = {
					target = this
					modifier = took_some_league_funds_opinion
				}
			}
		}
	}

	is_valid = {
		var:funds_value >= 300
	}
}

take_league_loan_gui = {
	scope = character

	effect = {
		var:league_owner = {
			change_variable = {
				name = funds_value
				subtract = 300
			}
			every_in_list = {
				variable = league_list
	
				if = {
					limit = { NOT = { this = root } }
	
					this = {
						save_scope_as = member
					}
					root = {
						add_opinion = {
							target = scope:member
							modifier = took_some_league_funds_opinion
						}
					}
					
				}
			}
		}
		add_gold = 300

		
	}

	is_valid = {
		var:league_owner.var:funds_value >= 300
	}
}